void set(array@int a)
{
	a[0] = 1;
}

void set_ref(ref array@int a)
{
	a[0] = 1;
}

void addone(ref int i)
{
	i = i+1;
}

class WithoutCtor {
public:
	array@int a[3];
};

class WithCtor {
public:
	WithCtor() {}
	array@int@2 a[4][3];
};

int main()
{
	array@int ia[1];
	ia[0] = 1;
	assert(ia[0] == 1);

	array@string sa[1];
	sa[0] = "1";
	assert(sa[0] == "1");

	array@int a1[1];
	set(a1);
	assert(a1[0] == 0);

	array@int a2[1];
	addone(a2[0]);
	assert(a2[0] == 1);

	array@int a3[1];
	set_ref(a3);
	assert(a3[0] == 1);

	array@int a4[10];
	assert(a4.Numof() == 10);
	a4.PushBack(1);
	assert(a4.Numof() == 11);
	// a4.PushBack("s");  // type error

	array@int@2 a[1][2];
	a[0][1] = 1;
	assert(a[0][1] == 1);
	a.Alloc(2, 3);
	a[1][2] = 2;
	assert(a[1][2] == 2);

	WithoutCtor o1;
	assert(o1.a.Numof() == 3);
	WithCtor o2;
	assert(o2.a.Numof() == 4);

	return 0;
}
